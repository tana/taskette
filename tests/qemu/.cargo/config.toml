[build]
target = "thumbv7em-none-eabihf"

[target.'cfg(target_arch = "arm")']
rustflags = [
    "-C", "link-arg=-Tlink.x",
    "-C", "link-arg=-Ltests/qemu/", # Path for memory.x
]
# STM32F405RGT6 (Cortex-M4)
runner = """qemu-system-arm \
    -machine netduinoplus2 \
    -nographic \
    -semihosting-config enable=on,target=native \
    -kernel \
    """

[target.'cfg(target_arch = "riscv32")']
rustflags = [
    "-C", "link-arg=-Tlinkall.x",
]
# ESP32C3
# TODO
runner = """qemu-system-arm \
    -machine netduinoplus2 \
    -nographic \
    -semihosting-config enable=on,target=native \
    -kernel \
    """